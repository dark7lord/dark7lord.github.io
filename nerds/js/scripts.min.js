ymaps.ready(function(){let e=new ymaps.Map("map",{center:[59.938635,30.323118],zoom:17},{searchControlProvider:"yandex#search"}),a=(ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>'),new ymaps.Placemark(e.getCenter(),{hintContent:"Собственный значок метки",balloonContent:"Студия Нёрдс"},{iconLayout:"default#image",iconImageHref:"img/map-marker.png",iconImageSize:[231,190],iconImageOffset:[-60,-170]}));e.geoObjects.add(a),e.behaviors.disable("scrollZoom"),e.controls.remove("searchControl")});let btnOpenModal=document.querySelector(".map__btn-open-modal"),modalCallback=document.querySelector(".modal-callback"),btnCloseModal=document.querySelector(".modal-callback__btn-close"),inputName=document.querySelector(".modal-callback__input-text--name"),inputEmail=document.querySelector(".modal-callback__input-text--email"),inputComment=document.querySelector(".modal-callback__textarea"),btnSubmitModal=document.querySelector(".modal-callback__btn-submit"),isStorageSupport=!0;try{var storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1,console.log(e)}btnOpenModal.addEventListener("click",function(e){e.preventDefault(),modalCallback.classList.add("modal-callback--opened"),inputName.focus(),storageName?(inputName.value=storageName,inputEmail.focus()):inputName.focus(),storageEmail&&(inputEmail.value=storageEmail,inputComment.focus())}),btnCloseModal.addEventListener("click",function(e){modalCallback.classList.remove("modal-callback--opened"),modalCallback.classList.remove("modal-callback--error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&modalCallback.classList.contains("modal-callback--opened")&&(e.preventDefault(),modalCallback.classList.remove("modal-callback--opened"),modalCallback.classList.remove("modal-callback--error"))}),btnSubmitModal.addEventListener("click",function(e){inputName.value&&inputEmail.value&&inputComment.value?isStorageSupport&&(localStorage.setItem("name",inputName.value),localStorage.setItem("email",inputEmail.value)):(e.preventDefault(),modalCallback.classList.remove("modal-callback--error"),modalCallback.offsetWidth=modalCallback.offsetWidth,modalCallback.classList.add("modal-callback--error"),inputName.required=!0,inputEmail.required=!0,inputComment.required=!0)});let buttons=document.querySelectorAll(".promo-slider__btn"),slides=document.querySelectorAll(".slide");buttons.forEach((e,a)=>{e.addEventListener("click",e=>{for(button of buttons)button.classList.remove("promo-slider__btn--active");e.target.classList.add("promo-slider__btn--active"),slides.forEach((e,l)=>{a===l?e.classList.add("slide--active"):e.classList.remove("slide--active")})})});
